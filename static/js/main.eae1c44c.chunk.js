(this.webpackJsonpelections=this.webpackJsonpelections||[]).push([[0],{14:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEUAAAAAcO8AbfAAbu8AbfAAAADf7BYRAAAABHRSTlMAIOCAOBhQtgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBwsQCTeHIPYOAAAAcElEQVQoz63QwQkAIQxE0dhBsAPBDuxApv+aNgmLTrysh81F/DwkKHI7RY9Qm8gYBPpUAQgAjUPpwFQKBozs4MDIDgF8EqCwAE4APYDtkoHtkkEQBkEScNJzmPYJfI8v4RB7XIb3qR3W8VMYPuv4ngcJiEaxpPaBOgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0wNy0xMVQxNjowOTo1NSswMjowMNHkVH8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMDctMTFUMTY6MDk6NTUrMDI6MDCguezDAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},28:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABX1BMVEUAAAD/AADYACfYACfXACjMADPZACbYACfYACfXACjXACjYACfYACfZACbcACPYACfZACb/AADYACfYACfWACnZACbYACfZACbYACfYACfXACjYACfZACbYACfZACbYACfYACfYACfYACfaACXVACvYACfYACfXACjYACfVACvbACTYACfYACfXACjYACfYACfZACbdACLYACfYACfVACvXACjYACfYACfaACXXACjfACDYACfYACfRAC7YACfXACjZACbYACfbACTYACfYACfjABzZACb/AADbACTYACfYACfYACfYACfXACjYACfYACfXACjYACfYACfXACjYACfZACbZACbYACfYACfYACfYACfYACfXACjVACvYACfYACfZACbXACjZACbXACjYACfYACfZACbYACfYACfbACTYACfYACfXACjXACi/AEDZACbYACfYACfWACnYACcAAACfMl5rAAAAc3RSTlMAAqXPZwqG7osgUv2wQx3y1AFb2R9+3l29/i2cWPe6SPi5pCkG2pF59Rgc9IqnyvMUD/rCJCa1hDeAEOnwC/yUmX0OqKMJcgMq7SHsNI37+UbW5jnYk6AauOHDr64eabYoWttg6k+tsWgHLsTIPwQ8lfYssR2CgAAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBwsQCDbpPPfZAAABPUlEQVQ4y5WSZ1PCQBCGVxEbKgYbaCQWRLF3FEExiL1XLNh7l/3/M5pI7o7cxhnfT8k+z+3d7RwAkaJiV4kb/kgpIpaVVzjySjTjqaqmeY0XrdRSOyk+FFJnx/UNjViQAupu8gcQHYXmFi9KCXCutiKRIOMaQdvaOzotHuoihLBwgG6C90Q47+0jhH6hwUB+zaDAh4Y5Hxk1S2PjMDHJhKjQYMqsTCsAsRmLx2OCkJg1SnM/X0nWYJ5RPZlKxY3SAoCPjdqV5iPMH3BxadnP1q+sgk1YW9c3Nhnf2ga7oKV3+A1398Au7MMBX354BJKQgWNrwNEIgCycwOkvP8vq5xeXsuDJXhk3vNaUm1tEVRYwk7i7f3h8en4xfigBX99C7x+f5khpAfGLvUkHgedfQk4NE49RzTEhiGTYc/8G3orooIkfRf4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDctMTFUMTY6MDg6NTQrMDI6MDCYUTT1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA3LTExVDE2OjA4OjU0KzAyOjAw6QyMSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},29:function(e,t,n){e.exports=n.p+"static/media/logo.3c15a0bd.png"},30:function(e,t,n){e.exports=n(79)},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(27),a=n.n(c),i=(n(35),n(4)),s=n(5),l=n(7),A=n(6),u=n(8),d=(n(36),n(9)),m=n.n(d),p=n(10),f=(n(37),n(38),n(14)),g=n.n(f),C=n(28),v=n.n(C),h=n(39),y=[-83.3437,42.2102,-82.8754,42.5197],E=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(A.a)(t).call(this,e))).map=null,n.geocoder=null,n.lat=null,n.lng=null,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"geocoderAnimation",value:function(){console.log("start animation"),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. "}),5e3),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4"}),5500),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 40"}),6e3),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 400"}),6500),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000"}),7e3),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 v"}),7500),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 ve"}),8e3),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 ver"}),8500),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 vern"}),9e3),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 verno"}),9500),setTimeout((function(){document.querySelector("#geocoder input").placeholder="Ex. 4000 vernor"}),1e4)}},{key:"componentDidMount",value:function(){var e=this;m.a.accessToken="pk.eyJ1IjoiY2l0eW9mZGV0cm9pdCIsImEiOiJjajd3MGlodXIwZ3piMnhudmlzazVnNm44In0.BL29_7QRvcnOrVuXX_hD9A",this.map=new m.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",zoom:13,center:[-83.1,42.36]}),this.geocoder=new h({accessToken:m.a.accessToken,bbox:y,placeholder:"Find your election info"}),this.geocoder.on("result",(function(t){e.getUserResults(t,e.map,e)}));var t=this.map;document.getElementById("geocoder").appendChild(this.geocoder.onAdd(this.map));try{this.geocoderAnimation()}catch(n){console.log("Error:"+{e:n})}this.map.on("load",(function(){e.map.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),console.log(g.a),e.map.loadImage(g.a,(function(e,n){if(e)throw e;t.addImage("cat",n),t.addLayer({id:"point",type:"symbol",source:"single-point",layout:{"icon-image":"cat","icon-size":.75}})})),e.map.addSource("poll-place",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.map.loadImage(v.a,(function(e,n){if(e)throw e;t.addImage("poll",n),t.addLayer({id:"poll-place",type:"symbol",source:"poll-place",layout:{"icon-image":"poll","icon-size":.75}})}))}))}},{key:"stripPhoneNumber",value:function(e){var t="";return console.log(e.split("(")),t=e.split("(")[1],console.log(t),console.log(t.split(")")),t=t.split(")")[0]+t.split(")")[1],console.log(t),console.log(t.split("-")),t=t.split("-")[0]+t.split("-")[1],console.log(t),t}},{key:"checkIfPhoneValid",value:function(){var e=document.getElementById("phone").value,t=/^(1\s|1|)?((\(\d{3}\))|\d{3})(\-|\s)?(\d{3})(\-|\s)?(\d{4})$/.test(e);if(console.log(document.querySelector("#geocoder input").value),t){var n={phone_number:e=this.stripPhoneNumber(e),address:document.querySelector("#geocoder input").value};console.log(n);var o=new Request("http://apis.detroitmi.gov/messenger/clients/1/subscribe/",{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-type":"application/json"}),mode:"cors",cache:"default"});fetch(o).then((function(e){201===e.status?(console.log("item submitted"),document.querySelector(".sending-alert").className="sending-alert",document.querySelector(".phone-valid-alert").className="phone-valid-alert active"):(document.querySelector(".sending-alert").className="sending-alert",document.querySelector(".invalid-phone-error-message").innerHTML="Error sending: Please try again.",document.querySelector(".phone-invalid-alert").className="phone-invalid-alert active")}))}else document.querySelector(".invalid-phone-error-message").innerHTML="Invalid number. Please enter re-enter you number.",document.querySelector(".phone-invalid-alert").className="phone-invalid-alert active"}},{key:"getUserResults",value:function(e,t,n){console.log(e),console.log(t),n.lat=e.result.center[0],n.lng=e.result.center[1],document.querySelectorAll(".item").forEach((function(e){e.innerHTML="",e.className="".concat(e.className.split(" ")[0]," ").concat(e.className.split(" ")[1])})),t.getSource("single-point").setData(e.result.geometry);var o="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Elections_2019/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(e.result.center[0],"%2C").concat(e.result.center[1],"+&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=");fetch(o).then((function(e){return e.json()})).then((function(o){console.log(o),document.querySelector(".App").className="App active";for(var r=null,c=0;c<o.features.length;c++)switch("Election Precincts"===o.features[c].properties.boundary_t&&(r=c),o.features[c].properties.boundary_t){case"Wayne County Community College Commissioner":document.querySelector(".wccc").innerHTML="\n            <div>\n              <strong>WAYNE COUNTY COMMUNITY COLLEGE COMMISSIONER</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".wccc").className="wccc item active";break;case"Congressional":document.querySelector(".congress").innerHTML="\n            <div>\n              <strong>CONGRESSIONAL</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".congress").className="congress item active";break;case"State Senate":document.querySelector(".state-senate").innerHTML="\n            <div>\n              <strong>STATE SENATE</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".state-senate").className="state-senate item active";break;case"City Council":document.querySelector(".council").innerHTML="\n            <div>\n              <strong>CITY COUNCIL</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".council").className="council item active";break;case"Police Commissioner":document.querySelector(".police").innerHTML="\n            <div>\n              <strong>POLICE COMMISSIONER</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".police").className="police item active";break;case"Wayne County Commissioner":document.querySelector(".wcc").innerHTML="\n            <div>\n              <strong>WAYNE COUNTY COMMISSIONER</strong><br>\n              ".concat(o.features[c].properties.representa,"<br>\n              <em>").concat(o.features[c].properties.district_l,"</em>\n            </div>\n            "),document.querySelector(".wcc").className="wcc item active";break;case"Election Precincts":r=c,document.querySelector(".poll").innerHTML="\n            <div>\n              <strong>VOTING POLL</strong><br>\n              ".concat(o.features[c].properties.precinct_location,"<br>\n              <em>").concat(o.features[c].properties.precinct_name,"</em>\n            </div>\n            "),document.querySelector(".poll").className="poll item active"}document.querySelector(".sign-up").innerHTML='\n      <div class="box">\n      <strong>GET TEXT REMINDERS</strong><br/>\n      <label for="phone">\n        Phone\n        <input id="phone" value="" placeholder="(313)333-3333" />\n      </label>\n      <div class="sending-alert">Sending...</div>\n      <div class="phone-valid-alert">Check your phone for a confirmation message. <span class="close-phone-validation-alert">&times;</span></div>\n      <div class="phone-invalid-alert"><span class="invalid-phone-error-message"></span> <span class="close-phone-invalid-alert">&times;</span></div>      \n      <button>SIGN UP</button>\n      </div>\n      ',document.querySelector("#phone").addEventListener("keyup",(function(e){n.phoneFormater(e)})),document.querySelector(".sign-up button").addEventListener("click",(function(e){document.querySelector(".sending-alert").className="sending-alert active",n.checkIfPhoneValid()})),document.querySelector(".sign-up button").addEventListener("click",(function(e){n.closePhoneValidationAlert(e)}));for(var a=document.querySelectorAll(".close-phone-validation-alert"),i=0;i<a.length;i++)a[i].addEventListener("click",(function(e){n.closePhoneValidationAlert(e)}));document.querySelector(".sign-up").className="sign-up item active";var s=o.features[r].properties.pollxy.split(","),l=[];s.forEach((function(e){l.push(parseFloat(e))})),l=p.point(l),t.getSource("poll-place").setData(l.geometry);var A=p.featureCollection([l,e.result]),u=p.center(A);t.flyTo({center:u.geometry.coordinates,zoom:12})}))}},{key:"phoneFormater",value:function(e){console.log(e);var t=e.target.value.replace(/\D/g,""),n={0:"(",3:")",6:"-"};e.target.value="";for(var o=0;o<t.length;o++)e.target.value+=(n[o]||"")+t[o]}},{key:"closePhoneValidationAlert",value:function(e){e.target.parentNode.className=e.target.parentNode.className.split(" ")[0]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Map"},r.a.createElement("div",{ref:function(t){return e.mapContainer=t}}))}}]),t}(o.Component),b=n(29),Y=n.n(b),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(A.a)(t).call(this))).state={},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:Y.a,alt:"City of Detroit"}),r.a.createElement("div",null,r.a.createElement("span",null,"Election Info"))),r.a.createElement("div",{id:"geocoder"}),r.a.createElement(E,{state:this.state}),r.a.createElement("div",{className:"poll item"}),r.a.createElement("div",{className:"sign-up item"}),r.a.createElement("div",{className:"council item"}),r.a.createElement("div",{className:"wccc item"}),r.a.createElement("div",{className:"wcc item"}),r.a.createElement("div",{className:"police item"}),r.a.createElement("div",{className:"state-senate item"}),r.a.createElement("div",{className:"congress item"}))}}]),t}(o.Component),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(r.a.createElement(S,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/elections",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/elections","/service-worker.js");N?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):T(e)}))}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.eae1c44c.chunk.js.map